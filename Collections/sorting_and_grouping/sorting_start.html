<!DOCTYPE html>
<html>
  <head>
    <title>Sorting, Grouping, Counting Collections with Underscore</title>
    <script type="text/javascript" src="../../underscore.js"></script>
    <script type="text/javascript" src="../../sampledata.js"></script>
    <script type="text/javascript">

      function getStudentInfo(elem, indx, list) {
        var container = document.getElementById("container");
        var student = "<p>" + elem.firstname + " " + elem.lastname + ", grade: " + elem.grade + "</p>";
        container.innerHTML = container.innerHTML + student;
      }

      function sortStudentsByGrade(item) {
        return item.grade;
      }

      function groupStudentsBySchool(item) {
          return item.school;
      }

      window.addEventListener("load", function(e) {
        /* Sorting by grade */
        //var sorted = _.sortBy(students, sortStudentsByGrade);
        // _.each(sorted, getStudentInfo);

        /* grouping students by school */
        var grouped = _.groupBy(students, groupStudentsBySchool);
        for (i in grouped) {
           var container = document.getElementById("container");
           var school = "<p style='font-weight:bold'>Students that go to: " + i + "</p>";
           container.innerHTML = container.innerHTML + school;
           _.each(grouped[i], getStudentInfo);
         }
      });

    </script>
  </head>
  <body>
    <h1>Sorting, Grouping, and Counting Collection Data with Underscore</h1>
    <h2>Student Information:</h2>
    <h3 id="numstudents">Number of Students: </h3>
    <div id="container">
    </div>
  </body>
</html>

